<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Forms Library</title>
  <link rel="stylesheet" href="/styles.css">
  <style>
    .container { max-width: 1100px; margin: 40px auto; padding: 16px; }
    .topbar { display:flex; align-items:flex-start; justify-content:space-between; gap:16px; flex-wrap:wrap; }
    .subtitle { margin: 6px 0 0; opacity: .8; }
    .searchWrap { min-width: 280px; flex: 1; max-width: 420px; }
    .search { width:100%; padding:12px 12px; border:1px solid #ddd; border-radius: 10px; }
    .pillRow { display:flex; gap:8px; flex-wrap:wrap; margin-top:10px; }
    .pill { border:1px solid #ddd; padding:6px 10px; border-radius: 999px; font-size: 13px; cursor:pointer; user-select:none; }
    .pill.active { border-color:#000; }
    .section { margin-top: 22px; }
    .section h2 { margin: 18px 0 10px; font-size: 18px; }
    .grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 12px; }
    .card { border:1px solid #e3e3e3; border-radius: 14px; padding: 14px; text-decoration:none; display:block; }
    .card:hover { border-color:#cfcfcf; }
    .cardTitle { display:flex; align-items:center; justify-content:space-between; gap:10px; }
    .name { font-weight:700; }
    .meta { margin-top: 6px; font-size: 13px; opacity: .8; }
    .tagRow { margin-top: 10px; display:flex; gap:8px; flex-wrap:wrap; }
    .tag { font-size: 12px; padding: 3px 8px; border-radius: 999px; border:1px solid #e1e1e1; opacity:.9; }
    .badgeNew { font-size: 11px; padding: 3px 8px; border-radius: 999px; border:1px solid #000; }
    .footerLinks { margin-top: 18px; display:flex; gap:14px; flex-wrap:wrap; }
    .muted { opacity: .8; }
    .empty { margin-top: 16px; padding: 14px; border:1px dashed #ddd; border-radius: 12px; display:none; }
  </style>
</head>
<body>
  <script type="module" src="/assets/js/auth-guard.js"></script>

  <main class="container">
    <div class="topbar">
      <div>
        <h1 style="margin:0;">Forms Library</h1>
        <p class="subtitle">Downloadable forms for Huntsville Real Estate Investors (members only).</p>
      </div>

      <div class="searchWrap">
        <input id="search" class="search" type="search" placeholder="Search forms (e.g., rental, contract, agent)..." />
        <div class="pillRow" id="pills">
          <span class="pill active" data-filter="all">All</span>
          <span class="pill" data-filter="rentals">Rentals</span>
          <span class="pill" data-filter="contracts">Contracts</span>
          <span class="pill" data-filter="business">Business</span>
        </div>
      </div>
    </div>

    <div class="section">
      <h2>Rentals</h2>
      <div class="grid">
        <a class="card item" data-cat="rentals" data-name="Midterm Rental Agreement" data-tags="rentals midterm lease agreement pdf"
           href="/members/files/Midterm%20Rental%20Agreement.pdf" target="_blank" rel="noopener">
          <div class="cardTitle">
            <span class="name">Midterm Rental Agreement</span>
            <span class="badgeNew">NEW</span>
          </div>
          <div class="meta">PDF • Midterm lease agreement</div>
          <div class="tagRow">
            <span class="tag">Rentals</span><span class="tag">PDF</span>
          </div>
        </a>

        <!-- Add more rental forms here -->
      </div>
    </div>

    <div class="section">
      <h2>Contracts</h2>
      <div class="grid">
        <a class="card item" data-cat="contracts" data-name="Land Contract Template" data-tags="contracts land contract template pdf"
           href="#" onclick="alert('Upload your PDF to /members/files and replace this link.');return false;">
          <div class="cardTitle">
            <span class="name">Land Contract Template</span>
            <span class="muted">Coming soon</span>
          </div>
          <div class="meta">PDF • Editable template</div>
          <div class="tagRow">
            <span class="tag">Contracts</span><span class="tag">PDF</span>
          </div>
        </a>

        <!-- Add more contract forms here -->
      </div>
    </div>

    <div class="section">
      <h2>Business</h2>
      <div class="grid">
        <a class="card item" data-cat="business" data-name="Alabama Registered Agent Form" data-tags="business registered agent alabama form pdf"
           href="#" onclick="alert('Upload your PDF to /members/files and replace this link.');return false;">
          <div class="cardTitle">
            <span class="name">Alabama Registered Agent Form</span>
            <span class="muted">Coming soon</span>
          </div>
          <div class="meta">PDF • State filing form</div>
          <div class="tagRow">
            <span class="tag">Business</span><span class="tag">PDF</span>
          </div>
        </a>

        <!-- Add more business forms here -->
      </div>
    </div>

    <div id="empty" class="empty">
      No matches. Try a different search term or clear filters.
    </div>

    <div class="footerLinks">
      <a href="/members/dashboard.html">← Back to dashboard</a>
      <a href="/" class="muted">Main site</a>
    </div>
  </main>

  <script>
    const search = document.getElementById("search");
    const pills = document.getElementById("pills");
    const items = Array.from(document.querySelectorAll(".item"));
    const empty = document.getElementById("empty");

    let activeCat = "all";

    function setActivePill(cat) {
      activeCat = cat;
      [...pills.querySelectorAll(".pill")].forEach(p => p.classList.toggle("active", p.dataset.filter === cat));
      applyFilter();
    }

    function applyFilter() {
      const q = (search.value || "").trim().toLowerCase();
      let shown = 0;

      items.forEach(el => {
        const cat = el.dataset.cat;
        const name = (el.dataset.name || "").toLowerCase();
        const tags = (el.dataset.tags || "").toLowerCase();

        const catOk = (activeCat === "all") || (cat === activeCat);
        const qOk = !q || name.includes(q) || tags.includes(q);

        const show = catOk && qOk;
        el.style.display = show ? "" : "none";
        if (show) shown++;
      });

      empty.style.display = shown ? "none" : "block";
    }

    pills.addEventListener("click", (e) => {
      const pill = e.target.closest(".pill");
      if (!pill) return;
      setActivePill(pill.dataset.filter);
    });

    search.addEventListener("input", applyFilter);
    applyFilter();
  </script>
</body>
</html>
